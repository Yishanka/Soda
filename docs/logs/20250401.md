### **类方法 vs. 对象方法 vs. 静态方法**
在 Flask 的 `Activity` 相关代码中，我们可以用 **类方法**（`@classmethod`）、**实例方法**（对象方法）和 **静态方法**（`@staticmethod`）来实现不同的功能。  
我们用 **活动路由（`ActivityController`）** 和 **活动模型（`Activity`）** 举例，分析三者的使用场景。

---

## **1. 对象方法（实例方法）**
**适用场景**：
- 需要访问实例的属性或方法（`self`）。
- 依赖于具体对象，比如修改活动的标题、获取某个活动的详情。

**在 `Activity` 模型中：**
```python
class Activity(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(100), nullable=False)
    description = db.Column(db.Text, nullable=False)

    def update_title(self, new_title):
        """修改当前活动的标题"""
        self.title = new_title
        db.session.commit()
```
✅ **使用实例方法的理由**：
- `update_title()` 方法是针对 **某个具体的活动对象**，它需要访问 `self.title`。
- 你不能对整个类 `Activity` 调用 `update_title()`，必须先创建一个 `Activity` 实例。

**调用方式**：
```python
activity = Activity.query.get(1)  # 查询 ID 为 1 的活动
activity.update_title("新的活动标题")  # 更新该活动的标题
```

---

## **2. 类方法（`@classmethod`）**
**适用场景**：
- 需要访问类的属性或方法（`cls`），但不依赖于具体对象。
- 适用于创建、查询等操作，作用于整个表，而不是某个实例。

**在 `Activity` 模型中：**
```python
class Activity(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(100), nullable=False)

    @classmethod
    def get_all(cls):
        """获取所有活动"""
        return cls.query.all()
```
✅ **使用类方法的理由**：
- `get_all()` 作用于整个 `Activity` 类，不依赖于具体的活动实例。
- `cls.query.all()` 直接查询数据库，获取所有活动，而不是某一个活动。

**调用方式**：
```python
activities = Activity.get_all()  # 获取所有活动
```

---

## **3. 静态方法（`@staticmethod`）**
**适用场景**：
- 方法与类相关，但不需要访问类或实例的属性。
- 适用于通用逻辑，比如格式化数据、检查输入是否合法。

**在 `Activity` 模型中：**
```python
class Activity(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    time = db.Column(db.DateTime, nullable=False)

    @staticmethod
    def format_time(time):
        """格式化活动时间"""
        return time.strftime('%Y-%m-%d %H:%M:%S')
```
✅ **使用静态方法的理由**：
- `format_time()` 只接收 `time` 参数，不访问 `self` 或 `cls`。
- 它只是一个工具函数，可以独立于 `Activity` 使用。

**调用方式**：
```python
formatted_time = Activity.format_time(datetime.now())  # 格式化当前时间
```

---

## **4. 在 `ActivityController` 路由中如何选择？**
### **（1）创建活动**
```python
class ActivityController:
    @staticmethod
    @activity_bp.route('/activities', methods=['POST'])
    def create_activity():
        """创建活动"""
        data = request.get_json()
        activity = Activity(
            title=data['title'],
            description=data['description'],
            time=datetime.fromisoformat(data['time'])
        )
        db.session.add(activity)
        db.session.commit()
        return jsonify({'message': '活动发布成功', 'activity_id': activity.id}), 201
```
✅ **为什么用静态方法？**
- `create_activity()` **不需要访问 `ActivityController` 本身的属性**，只是处理 HTTP 请求并操作数据库，因此 `@staticmethod` 是合理的。

---

### **（2）获取所有活动**
```python
class ActivityController:
    @staticmethod
    @activity_bp.route('/activities', methods=['GET'])
    def get_activities():
        """获取所有活动"""
        activities = Activity.get_all()  # 调用类方法
        return jsonify([{'id': a.id, 'title': a.title} for a in activities])
```
✅ **为什么用静态方法？**
- `get_activities()` 只是封装 `Activity.get_all()` 这个类方法，不需要访问 `ActivityController` 的状态，因此 `@staticmethod` 是合适的。

---

### **（3）获取某个活动**
```python
class ActivityController:
    @staticmethod
    @activity_bp.route('/activities/<int:activity_id>', methods=['GET'])
    def get_activity(activity_id):
        """获取特定活动"""
        activity = Activity.query.get(activity_id)
        if not activity:
            return jsonify({'error': '活动不存在'}), 404
        return jsonify({'id': activity.id, 'title': activity.title})
```
✅ **为什么用静态方法？**
- `get_activity()` 仅处理请求，并不依赖 `ActivityController` 的状态。

---

## **总结**
| 方法类型      | 适用场景 | 示例 |
|-------------|---------|------|
| **实例方法** | 需要访问对象属性（`self`） | `activity.update_title("新标题")` |
| **类方法** | 需要访问类的属性或方法（`cls`），不依赖于具体实例 | `Activity.get_all()` |
| **静态方法** | 逻辑与类相关，但不访问实例或类的属性 | `Activity.format_time(datetime.now())` |

✅ **模型层（`Activity`）**
- **实例方法**：修改活动的标题 (`update_title()`)
- **类方法**：查询所有活动 (`get_all()`)
- **静态方法**：格式化时间 (`format_time()`)

✅ **控制器层（`ActivityController`）**
- **静态方法**：处理 HTTP 请求，如 `create_activity()`、`get_activities()`
- **类方法** 可能很少使用，除非 `ActivityController` 需要存储全局状态。

你觉得这样分类清晰吗？或者你有更具体的应用场景要讨论？

